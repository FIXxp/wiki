import{_ as l,r,o as u,c as h,b as n,w as s,a as e,F as p,d as o,e as t}from"./app.749051e4.js";const d={},m=o('<h1 id="launcher-signature" tabindex="-1"><a class="header-anchor" href="#launcher-signature" aria-hidden="true">#</a> Launcher signature</h1><h2 id="where-to-get-a-certificate" tabindex="-1"><a class="header-anchor" href="#where-to-get-a-certificate" aria-hidden="true">#</a> Where to get a certificate?</h2><ul><li>generate a self -signed certificate (for example, using GenerateCertificatemodule or according to the instructions below)</li><li>Ask for a certificate from someone who has already set up his own CA competently and can sign other certificates</li><li>Create CSR, and convey it to the person who will sign it</li><li>You can give each build of launcher to a person who has a certificate, but not a SA for signature.</li><li>you can buy a certificate for the signature of launcher from official SA (very expensive)</li></ul><h2 id="signature-jar" tabindex="-1"><a class="header-anchor" href="#signature-jar" aria-hidden="true">#</a> Signature jar</h2><h3 id="requirements" tabindex="-1"><a class="header-anchor" href="#requirements" aria-hidden="true">#</a> Requirements</h3><ul><li>Version 5.1.0+</li><li>Certificate</li></ul><h3 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h3>',7),f=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token property"},'"sign"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t(`
    `),e("span",{class:"token property"},'"enabled"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"false"),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStore"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"MyKeyStore.p12"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStoreType"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"PKCS12"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStorePass"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"mypass"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyAlias"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"myname"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyPass"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"mypass"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"metaInfKeyName"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SIGNUMO.RSA"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"metaInfSfName"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SIGNUMO.SF"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"signAlgo"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SHA256WITHRSA"'),t(`
  `),e("span",{class:"token punctuation"},"}"),t(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br")])],-1),g=t("JKS "),b=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token property"},'"sign"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t(`
    `),e("span",{class:"token property"},'"enabled"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"false"),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStore"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"MyKeyStore.p12"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStoreType"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"JKS"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyStorePass"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"mypass"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyAlias"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"myname"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"keyPass"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"mypass"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"metaInfKeyName"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SIGNUMO.RSA"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"metaInfSfName"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SIGNUMO.SF"'),e("span",{class:"token punctuation"},","),t(`
    `),e("span",{class:"token property"},'"signAlgo"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"SHA256WITHRSA"'),t(`
  `),e("span",{class:"token punctuation"},"}"),t(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br")])],-1),y=o('<h4 id="descriptions-of-the-configuration" tabindex="-1"><a class="header-anchor" href="#descriptions-of-the-configuration" aria-hidden="true">#</a> Descriptions of the configuration</h4><p><code>enabled</code> - Turn on the signature with your certificate <code>keyStore</code> - The path to the keys storage <code>keyStoreType</code> - Storagery<br><code>keyStorePass</code> - Password from the storage<br><code>keyAlias</code> - Key Alias<br><code>keyPass</code> - Password from the key, may not match Storepass<br><code>signAlgo</code> - Signature algorithm</p><h2 id="signature-exe" tabindex="-1"><a class="header-anchor" href="#signature-exe" aria-hidden="true">#</a> Signature exe</h2>',3),k={href:"https://github.com/GravitLauncher/LauncherModules/tree/master/OpenSSLSignCode_module",target:"_blank",rel:""},_=t("Module OpenSSLSignCode"),C=t("allows you to sign "),S=e("strong",null,"Launcher.exe",-1),w=t(" with its certificate using the utility osslsigncode."),x=o('<h3 id="installation-of-the-module" tabindex="-1"><a class="header-anchor" href="#installation-of-the-module" aria-hidden="true">#</a> Installation of the module</h3><ol><li>Copy the module <strong>OpenSSLSignCode_module.jar</strong> In the folder <strong>/LaunchServer/modules/</strong>.</li><li>Be sure to create a self -signed certificate or buy it. <ul><li>In the configuration <strong>LaunchServer.json</strong> <code>&quot;sign&quot;: { &quot;enabled&quot;: true }</code>.</li></ul></li><li>The installed program <strong>osslsigncode</strong>.</li></ol>',2),q=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"sudo"),t(),e("span",{class:"token function"},"apt"),t(),e("span",{class:"token function"},"install"),t(` osslsigncode
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br")])],-1),v=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token builtin class-name"},"cd"),t(` /etc/yum.repos.d/
`),e("span",{class:"token function"},"wget"),t(` https://download.opensuse.org/repositories/home:danimo/CentOS_7/home:danimo.repo
yum `),e("span",{class:"token function"},"install"),t(` osslsigncode calc
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br")])],-1),A=o(`<p>1.Perform <strong>Build</strong> in the <em>launchserver</em> console, if everything is done correctly, <strong>exe</strong> will be signed by a certificate.</p><h3 id="configuration-1" tabindex="-1"><a class="header-anchor" href="#configuration-1" aria-hidden="true">#</a> Configuration</h3><p>Path: <code>/LaunchServer/config/OSSLSignCode/Config.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;timestampServer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://timestamp.globalsign.com/scripts/timstamp.dll&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;osslsigncodePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;osslsigncode&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customArgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;checkSignSize&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;checkCorrectSign&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;checkCorrectJar&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="commands" tabindex="-1"><a class="header-anchor" href="#commands" aria-hidden="true">#</a> Commands</h3><p>Signs EXE created using Launch4j manually</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>osslsignexe [path to input exe] [path to output exe]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="comments" tabindex="-1"><a class="header-anchor" href="#comments" aria-hidden="true">#</a> Comments</h3><ul><li>Sometimes you can get an error about the mismatch of the signature size.This occurs due to <em>timestamp server</em>, since You cannot guess in advance whether the signature size in the first call will coincide in the second.If you bother you, you can Disconnect the use of <code>timestampServer</code> by removing this line from the configuration.</li></ul><h2 id="obtaining-your-certificate" tabindex="-1"><a class="header-anchor" href="#obtaining-your-certificate" aria-hidden="true">#</a> Obtaining your certificate</h2><h3 id="creation-of-self-signed-codesign-certificate" tabindex="-1"><a class="header-anchor" href="#creation-of-self-signed-codesign-certificate" aria-hidden="true">#</a> Creation of self -signed Codesign Certificate</h3><p>You do not want to depend on anyone and fully own the entire chain of certificates?Then you here.In this section, we will create a basic chain of certificates with one CA and one final certificate.That&#39;s enough to sign Jar and EXE Launcher and go through checks</p>`,12),I=t("We will create with the help of [XCA] ("),R={href:"https://github.com/chris2511/xca/releases",target:"_blank",rel:""},T=t("https://github.com/chris2511/xca/releases"),L=t("). Choose the last release, download, install"),j=o('<ol><li>Create a database. When creating a database, be sure to set the password and save/write it in a safe place. Try to adhere to safety rules - this is access to all your certificates.</li><li>Go to the &quot;Certificates&quot; tab and press the &quot;New Certificate&quot; button</li><li>In the \u201CProstekt\u201D tab, indicate the Commonname field - for example, \u201CSupercraft Root Ca\u201D. It is recommended to enter a name ending on &quot;Root Ca&quot; - it will be easier for you and to everyone else who will watch your certificate</li><li>In the same tab &quot;subject&quot; at the bottom, click on the &quot;generate new key&quot; button. Key type - RSA, key length - 4096 bits. Click &quot;Create&quot;</li><li>In the \u201CExpansion\u201D tab, select the Type - \u201CCertification Center\u201D, in the column \u201CChoice of the period\u201D indicate from 1 to 10 years and click the \u201CApply\u201D button, after which the end date must move to the number of years you specified</li><li>In the \u201CKeys Field\u201D tab in the first column, indicate \u201CDigital Signature\u201D and \u201CCertificate Sign\u201D, in the second \u201CCode Signing\u201D, no more in this tab must change anything else in this tab</li><li>In the &quot;Netscape&quot; tab, if something is written in the &quot;Netscape Comment&quot; field - remove</li><li>After that, if you are sure in the conducted parameters, you can click OK. You have created a root certificate!</li><li>We export the root certificate. To do this, select a freshly executed certificate and press the &quot;Export&quot; button. Export format - &quot;PEM (.crt)&quot;, the file where to export to select yourself at your discretion. Press the OK button</li><li>Next, you need to create the final certificate that you will sign the launcher (jar and/or exe). Click &quot;New Certificate&quot;</li><li>In the \u201CPrimary\u201D tab, it should be selected \u201Dto use this certificate for the signature\u201C where your Root CA, created at the previous stage, should be indicated</li><li>In the Subject tab, indicate the Commonname field - for example, &quot;Supercraft Code Sign&quot;. It is recommended to enter a name ending on &quot;Code Sign&quot; - it will be easier for you and to everyone else who will watch your certificate</li><li>In the same tab &quot;subject&quot; at the bottom, click on the &quot;generate new key&quot; button. Key type - RSA, key length - 2048 bits. Click &quot;Create&quot;</li><li>In the \u201CExpansion\u201D tab, select the Type - \u201Cfinal subject\u201D, in the column \u201CChoice of the period\u201D indicate from 1 to 10 years and click the \u201CApply\u201D button, after which the end date should move to the number of years you specified. Please note that the deadline for the final certificate cannot be more than the validity period of your Root Ca. Less is possible, more - no</li><li>All other settings are similar. In the \u201CKeys Field\u201D tab in the first column, indicate \u201CDigital Signature\u201D (and do not indicate Certificate Sign), in the second \u201CCode Signing\u201D, you don\u2019t need to change anything else in this tab. In the &quot;Netscape&quot; tab, if something is written in the field &quot;Netscape Comment&quot; - remove. After that, if you are sure in the conducted parameters, you can click &quot;OK&quot;</li><li>You have created a final certificate! It remains to export this certificate. Select your &quot;Code Sign&quot; certificate and press the &quot;Export&quot; button. Export format - &quot;PKCS12 chain&quot;, choose the location yourself. Enter the password that your .p12 container will be encrypted. The password should not match the password from your database, it is unsafe. It is this password that you will indicate in the configuration in the signature Everything! You can already use. File ** _ ROOT_CA.CRT (your root certificate) copy to the Launchserver TrustStore folder. If desired, install it in your PC as a trusted certification center. And then you can configure the Jar/Exe signature by your certificate</li></ol><h3 id="creation-of-self-signed-ca" tabindex="-1"><a class="header-anchor" href="#creation-of-self-signed-ca" aria-hidden="true">#</a> Creation of self-signed CA</h3>',2),E=t("Want to feel like a real expert? What would everything look as believable and seriously? Do you want not only to sign JAR/EXE, but in general anything where certificates are used? Then you here. You will need the same [xca] ("),P={href:"https://github.com/chris2511/xca/releases",target:"_blank",rel:""},K=t("https://github.com/chris2511/xca/releases"),N=t(")"),O=e("li",null,`Let's start with the most important - the key of your central Root CA certificate. Create a XCA database directly on the flash drive and generate the RSA key with at least 4096 bits. Then proceed to the creation of a Root CA of a certificate. In the "subject" section, indicate all the main parameters, excluding emailaddress so that everything looks serious. For additional parameters, you can score in this tab, they are not needed. In the "Extensions" section, indicate the type - "certification center", for at least 5 years. "The area of \u200B\u200Bthe key to the key" - "Certificate Sign" and "Crl Sign", everything else is unchanged. In the "Netscape" section, everything can be left empty`,-1),G=t('Then create an \u201Cadditional\u201D CA with settings like Root CA in the same database, and in the name either number or year. The only difference in "extensions" in the field "X.509V3 CRL" indicate the URL to your site where the central CRL (for example '),F={href:"https://ca.example.com/root.crl",target:"_blank",rel:""},M=t("https://ca.example.com/root.crl"),U=t('). You will use this SA instead of the central Root CA to create other certificates. Then export the key and the certificate of additional CA itself and also only the Root Ca certificate. The Root CA key should not leave the flash drive. Further, I will call this CA for convenience - "2020 CA"'),D=e("li",null,"Create CRL ROOT.CRL using your Root CA (PKM-> Ts-> generate CRL) and export it. Then you will pour it on your site by the URL that you indicated above when generated 2020 CA",-1),W=e("li",null,"Save this database for another flash drive, CD disc, whatever it will not be connected to your PC physically (which means the Root CA key will be in safety) and that suddenly will not break immediately",-1),Y=e("li",null,"Create a new database in another place (for example on your hard drive) where to import Root CA certificate, 2020 CA certificate and 2020 Ca key. Then you will work only with this base.",-1),J=t('Create a CA that will serve as a specific goal, for example, "Code Sign RSA CA", indicating as CRL something like '),V={href:"https://ca.example.com/2020.crl",target:"_blank",rel:""},X=t("https://ca.example.com/2020.crl"),B=t(". All CA created using 2020 CA will use this CRL URL. Esstestively filling all the necessary fields"),z=t("Generate CRL for 2020 CA ("),H={href:"https://ca.example.com/2020.crl",target:"_blank",rel:""},Q=t("https://ca.example.com/2020.crl"),Z=t(" and all specialized CA ("),$={href:"https://ca.example.com/2020/codesign.crl",target:"_blank",rel:""},ee=t("https://ca.example.com/2020/codesign.crl"),te=t("). Then you will pour them on the site by the URL that you indicated"),ne=e("li",null,"And now you can create final certificates. It happens that you need to indicate some special OID that is not in GUI. Then you go to additionally-> edit and there you can specify any parameters that can be indicated in the OpensSL configuration. For example, add custom ExtndedKeyusage",-1);function ae(se,oe){const i=r("CodeGroupItem"),c=r("CodeGroup"),a=r("ExternalLinkIcon");return u(),h(p,null,[m,n(c,null,{default:s(()=>[n(i,{title:"PKCS12",active:""},{default:s(()=>[f]),_:1}),g,n(i,{title:"JKS",active:""},{default:s(()=>[b]),_:1})]),_:1}),y,e("p",null,[e("a",k,[_,n(a)]),C,S,w]),x,n(c,null,{default:s(()=>[n(i,{title:"Debian-like systems",active:""},{default:s(()=>[q]),_:1}),n(i,{title:"CentOS"},{default:s(()=>[v]),_:1})]),_:1}),A,e("p",null,[I,e("a",R,[T,n(a)]),L]),j,e("p",null,[E,e("a",P,[K,n(a)]),N]),e("ol",null,[O,e("li",null,[G,e("a",F,[M,n(a)]),U]),D,W,Y,e("li",null,[J,e("a",V,[X,n(a)]),B]),e("li",null,[z,e("a",H,[Q,n(a)]),Z,e("a",$,[ee,n(a)]),te]),ne])],64)}var re=l(d,[["render",ae],["__file","sign.html.vue"]]);export{re as default};
